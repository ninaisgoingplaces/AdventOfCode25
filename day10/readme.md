Part 2 was solved by brute force. 
Took roughly 1 hour on my macbook pro.